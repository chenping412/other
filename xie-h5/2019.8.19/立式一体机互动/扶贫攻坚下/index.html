<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width,initial-scale=1.0" />
    <link rel="stylesheet" href="./css/index.css?v=1"/>
    <link rel="stylesheet" href="./css/swiper.min.css"/>
</head>
<body>
<div class="main" id="main" style="transform: scale(1)">
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chart1 chartbox"></div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>布局农村电商</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chartbox chartbox-text">
                        <h3>人 饮 保 障</h3>
                        <ul class="chart2"></ul>
                    </div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>人饮保障</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chartbox chartbox-text">
                        <h3>促进网络扶贫政策</h3>
                        <ul class="chart3"></ul>
                    </div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>促进网络<br/>扶贫政策</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chartbox chartbox-text">
                        <h3>强 党 扶 贫</h3>
                        <ul class="chart4"></ul>
                    </div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>强党扶贫</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chart5 chartbox"></div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>扶贫医疗<br/>保障</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chartbox chartbox-text">
                        <h3>扶贫住房保障</h3>
                        <ul class="chart6"></ul>
                    </div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>扶贫住房保障</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chartbox chartbox-text">
                        <h3>扶贫教育保障</h3>
                        <ul class="chart7"></ul>
                    </div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>扶贫教育保障</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chartbox chartbox-text">
                        <div class="chart8 chartbox"></div>
                    </div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>发展产业<br/>带贫增收</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
            <div class="swiper-slide">
                <div class="item-chartbox">
                    <div class="chartbox chartbox-text">
                        <h3>交通建设</h3>
                        <ul class="chart9"></ul>
                    </div>
                </div>
                <div class="img">
                    <div class="img-text">
                        <span>交通建设</span>
                    </div>
                    <div class="earth">
                        <div class="earth-ani"></div>
                    </div>
                    <img src="./images/earth_light.png" class="light" alt="">
                </div>
            </div>
        </div>
        <div class="swiper-button-prev icon-swipe"></div>
        <div class="swiper-button-next icon-swipe"></div>
    </div>
    <div class="footer">


        <div class="footer-stage">
            <div class="water w15 water1"></div>
            <div class="water w15 water2"></div>
            <div class="water w15 water3"></div>
            <div class="water w15 water4"></div>
            <div class="water w5 water5"></div>
            <div class="water w5 water6"></div>
            <div class="water w5 water7"></div>
            <div class="water w5 water8"></div>
        </div>
        <img src="./images/light1.png" class="light" alt="">
        <img src="./images/light2.png" class="light light-2" alt="">
    </div>
    <canvas id="space" width="100%" height="100%"></canvas>
</div>

<script src="./dist/swiper.min.js"></script>
<script src="./js/jquery.min.js" type="text/javascript"></script>
<script src="./js/echarts.min.js" type="text/javascript"></script>
<script src="./js/chart1.js" type="text/javascript"></script>
<script src="./js/chart5.js" type="text/javascript"></script>
<script src="./js/chart8.js" type="text/javascript"></script>
<script src="./js/canvas.star.js"></script>
<script>
    var screenRate = 1;

    function mainScale() {
        screenRate = document.documentElement.clientWidth / 1920;
        document.getElementById('main').style.transform = "scale(" + screenRate + ")";
    }
    mainScale();
    window.onresize = function () {
        mainScale()
    };
    $(function () {
        var mySwiper = new Swiper('.swiper-container', {
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            slidesPerView: 5,
            loop: true,
            loopAdditionalSlides: 3,
            watchActiveIndex: true,
            centeredSlides: true,
            effect: 'coverflow',
            autoplay : {
                delay:5000
            },
            coverflowEffect: {
                rotate: 0,
                stretch: -150,
                depth: 200,
                modifier: 1,
                slideShadows: false
            }
        })

        var opt1 = makeOpt1();
        var opt5 = makeOpt5();
        var opt8 = makeOpt8();
        myChartSetOpt('.chart1', opt1);
        myChartSetOpt('.chart5', opt5);
        myChartSetOpt('.chart8', opt8);

        //促进网络扶贫政策
        var obj2 = {
            '投入资金': '695.22#万',
            '安全项目': '24#项',
            '解决饮水': '5415#人'
        };

        $('.chart2').html(richNumbers(obj2));
        //促进网络扶贫政策
        var obj3 = {
            '投入资金': '72.6#万',
            '建设贫困村': '6#个',
            '光纤里程': '33#公里'
        };
        $('.chart3').html(richNumbers(obj3));

        //强党扶贫
        var obj4 = {
            '举办期数': '212#期',
            '参与人数': '1554#人'
        };
        $('.chart4').html(richNumbers(obj4));

        // 扶贫住房保障
        var obj6 = {
            '危房改造': '240#户',
            '投入资金': '786#万',
            '修缮住房': '52#户',
        };
        $('.chart6').html(richNumbers(obj6));

        // 扶贫教育保障
        var obj7 = {
            '资助大学生': '277#人',
            '建档立卡': '2368#人',
            '资助总额': '166.8#万#+'
        };
        $('.chart7').html(richNumbers(obj7));

        // 交通建设
        var obj9 = {
            '投入资金': '1902#万#+',
            '硬化项目': '68#个',
            '硬化里程': '49#公里',
            '受益人口': '28181#人'
        };
        $('.chart9').html(richNumbers(obj9));

        // Calculate the screen size
        screenH = $(window).height();
        screenW = $(window).width();

        // Get the canvas
        canvas = $('#space');

        // Fill out the canvas
        canvas.attr('height', screenH);
        canvas.attr('width', screenW);
        context = canvas[0].getContext('2d');

        // Create all the stars
        for (var i = 0; i < numStars; i++) {
            var x = Math.round(Math.random() * screenW);
            var y = Math.round(Math.random() * screenH);
            var length = 1 + Math.random() * 2;
            var opacity = Math.random();

            // Create a new star and draw
            var star = new Star(x, y, length, opacity);

            // Add the the stars array
            stars.push(star);
        }

        setInterval(animate, 1000 / fps);

    });


    function myChartSetOpt(className, option) {
        $(className).each(function (index, item) {
            var myChart = echarts.init(item);
            myChart.setOption(option)
        })
    }

    function richNumbers(opt) {
        var lenArr = [];
        for (key in opt) {
            lenArr.push(opt[key].length - 1)
        }
        var len = lenArr.sort(function (a, b) {
            return b - a
        })[0]
        var htmlStr = ''
        for (key in opt) {
            htmlStr += '<li class="clearfix"><div class="fl label">' + key + '</div><div class="fr">';
            var spans = '';
            var spanArr2 = opt[key].split('#');
            var spanLen1 = spanArr2[1].length;
            var spanLen2 = len - spanLen1;
            for (var i = spanLen1 - 1; i >= 0; i--) {
                spans = '<span class="text-box"><i>' + spanArr2[1][i] + '</i></span>' + spans;
            }
            var nums = [];
            for (var i = 0; i < spanLen2; i++) {
                if (i > spanArr2[0].length - 1) {
                    nums.unshift('<span class="text-box"><i class="gradient-text-one"></i></span>');
                } else {
                    nums.push('<span class="text-box"><i class="gradient-text-one">' + spanArr2[0][i] + '</i></span>');
                }
            }
            spans = nums.join('') + spans;
            if (spanArr2[2]) {
                spans += '<i class="icon_add">+</i>'
            }
            htmlStr += spans;

            htmlStr += '</div></li>';
        }
        return htmlStr;


    }
</script>
</body>
</html>